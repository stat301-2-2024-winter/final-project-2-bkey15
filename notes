## 02/21/24 ##

- I think I can merge tidymodels fits with mice package, specifically as.mira()? See https://amices.org/mice/reference/as.mira.html

- Description of process:
  1. PREDICT hr_score through a standard tidymodeling process. This will include the use of step_impute_bag to impute predictors.
  2. SUBSTITUTE missing values in hr_score with predictions, assuming model is found to be robust.
  3. FIT a model (with hr_score as outcome, now that it's complete) using the tidymodeling process, again imputing predictors with step_impute_bag.
  4. REPEAT to create a series of fits (perhaps m=5) suitable for the mice package.
  5. TRANSFORM fits with as.mira so that they're ready to...
  6. POOL, yielding the final inference.
  
- **Step 1 is what this project endeavors to complete.**
- Step 3 will need the use v-fold cross-validation to locate the optimal tuning parameters, given that I'll be relying on a lasso regression at this point.
- I'm having issues with proof of concept for Step 5, but I'm assuming it'll be doable.
- Another way to begin step 3 is to convert imputed datasets (created tidymodeling preprocessing, ending specifically with prep + bake) into mids objects using as.mids, and then running the fit using: with(mids_obj, formula). Formula would need to use glmnet for lasso. Does look hard to convert objects into mids_obj, though...
- The main question I'm thinking through is: should I merge 5-ish fits, or 5-ish imputed datasets, either of which could fully rely on tidymodeling?
- Or I could just do the whole thing beginning with Step 3 using mice. Might be easier, might not be...

## 02/22/24 ##

- For this project, I should run two predictions: one for avg_kill_tort as the sole predictor, and the other using a bigger (but not too big) set of variables.
- I tried imputing all missing values in the dataset last night to no avail (R aborted task due to max-out of memory).
- I've tried merging PTS & QoG (which has PTS) with preproc_data, but it's not completing correctly due to missingness in cowcode.
- Only observations with a cowcode has a corresponding hr_score. That is, there is no hr_score for any observation that lacks a cowcode.
- These are the cases lacking a cowcode + hr_score in preproc_data:
  - Palestine/West Bank
  - Palestine/Gaza
  - Somaliland
  - Hong Kong
  - Palestine/British Mandate
  - Zanzibar
- Pretty similar set of cases (cow_year duplicates) in pts.
- This is an extremely limited number of cases that probably don't matter for the issue of trade agreements. Going to filter these out to get a consistent merge.
- I suppose I could create a step_dummy using country_name_vdem rather than cowcode?
- This actually wouldn't work since there's no data at all to fit and test performance. What could potentially work is estimating by introducing a step_dummy for region rather than country. Maybe return to this, especially if dummy by country is too computationally difficult.
- Also, step_dummy for time (year) isn't going to work either. Computing the estimated relationship between 2015, 2016, etc. and the outcome doesn't give us any information as to what the relationship will be in 2020, 2021, etc. So, let's leave out the time component. Also, it can be argued from a theoretical standpoint that the relationship between political killings, etc. and human rights performance is unaffected by time considerations (i.e., if a government kills, then it's ipso facto performing poorly HR-wise, irrespective of the time point).

## 02/24/24 ##

- After merging, there's a lot of missingness for the Czech Republic. V-Dem calls it "Czechia," even during the Czechoslovakia period, so it's safe to replace these values with that of Czechoslovakia's. May need to do this early on in the preprocessing.
- Am ultimately going to change Czechoslovakia's COW code from 315 to 316 (Czechia's). Both the V-Dem and HR Scores datasets treat the latter as a continuation of the former, hence why I'm not gonig to separate the two entirely by recoding pre-1993 Czechia's years to 315 in my preprocessed dataset.
- The microstates don't appear in the V-Dem dataset at all. Will be removing these observations wholesale.
- Extant but marginal missingness for post-Soviet states, DDR, West Germany, etc., due to coding gaps, late coding start dates, etc. Will just remove these observations.
- Important: we need to set seed for knn fits, because R will randomly break ties between observations if a tie exists.
- Deleted "memos" folder because it's messing up how plots are read in to the qmds
